(function(t){function e(e){for(var i,a,r=e[0],l=e[1],c=e[2],d=0,u=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&u.push(o[a][0]),o[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,r=1;r<s.length;r++){var l=s[r];0!==o[l]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},o={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var h=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),o=s.n(i);o.a},"0638":function(t,e,s){"use strict";var i=s("851e"),o=s.n(i);o.a},1060:function(t,e,s){"use strict";var i=s("d733"),o=s.n(i);o.a},1290:function(t,e,s){},"40c8":function(t,e,s){"use strict";var i=s("58ae"),o=s.n(i);o.a},"514f":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("TopPanel"),s("LeftPanel"),s("RightPanel"),s("MainCanvas")],1)},n=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"left-panel h-100 display-table position-absolute top-0"},[s("div",{staticClass:"left-panel-inner display-table-cell p-5 text-center"},[s("button",{staticClass:"btn btn-primary btn btn-primary btn-circle btn-xl",class:{active:"SELECT"===t.store.state.tool},attrs:{title:"Select (S)"},on:{click:function(e){return t.store.selectTool("SELECT")}}},[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{"data-v-076a7a29":"","data-v-306af221":"",d:"M     5 5L     5 5L     14 25L     16 16L     25 13Z      ",fill:"none",transform:"","stroke-linecap":"butt","stroke-width":"2"}})])]),s("button",{staticClass:"btn btn-primary btn btn-primary btn-circle btn-xl",class:{active:"EDIT"===t.store.state.tool},attrs:{title:"Edit (E)"},on:{click:function(e){return t.store.selectTool("EDIT")}}},[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 19 10 L 19 4 L 4 4 L 4 19 L 10 19 M 11 11 L 15 21 L 17 17 L 21 15 Z M 2 17 L 2 21 L 6 21 L 6 17 Z M 6 2 L 6 6 L 2 6 L 2 2 Z M 17 2 L 21 2 L 21 6 L 17 6 Z","stroke-width":"2"}})])]),s("button",{staticClass:"btn btn-primary btn btn-primary btn-circle btn-xl",class:{active:"PEN"===t.store.state.tool},attrs:{title:"Pen (P)"},on:{click:function(e){return t.store.selectTool("PEN")}}},[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 19 2 L 13 8 L 10 6 L 4 13 L 2 22 L 12 20 L 18 14 L 16 11 L 22 5 L 19 2 Z M 2 22 L 9 15 M 16 5 L 19 8 ","stroke-width":"2"}})])]),s("button",{staticClass:"btn btn-primary btn btn-primary btn-circle btn-xl",class:{active:"RECT"===t.store.state.tool},attrs:{title:"Pen (P)"},on:{click:function(e){return t.store.selectTool("RECT")}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 3 3 L 3 21 L 21 21 L 21 3 L 3 3 Z","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}})])]),s("div",{staticClass:"btn-hover-group position-relative mb-2"},[s("button",{staticClass:"btn btn-primary btn-circle btn-xl trigger m-0"},[t._v(" + ")]),s("div",{staticClass:"btn-hover-group-inner"},[s("ShapeModal",{attrs:{btnTitle:"Add Circle",modalTitle:"Create a Circle"},on:{confirm:function(e){return t.addCircle()}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M     2.4582000166892914 12.000000016689302C 2.4582000166892914 6.730209390751875 6.730209390751827 2.4582000166893003 12.000000016689302 2.4582000166893003C 17.26979064262678 2.4582000166893003 21.541800016689265 6.730209390751875 21.541800016689265 12.000000016689302C 21.541800016689265 17.26979064262674 17.26979064262678 21.541800016689308 12.000000016689302 21.541800016689308C 6.730209390751827 21.541800016689308 2.4582000166892914 17.26979064262674 2.4582000166892914 12.000000016689302Z     0.8400000166893005 0.8400000166893005","stroke-width":"2"}})])]},proxy:!0},{key:"content",fn:function(){return[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label display-inline mr-2"},[t._v("Radius")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.circleRadius,expression:"circleRadius",modifiers:{number:!0}}],staticClass:"form-input form-input-radius display-inline",attrs:{type:"number"},domProps:{value:t.circleRadius},on:{input:function(e){e.target.composing||(t.circleRadius=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]},proxy:!0}])}),s("ShapeModal",{attrs:{btnTitle:"Add Star",modalTitle:"Create a Star"},on:{confirm:function(e){return t.addStar()}},scopedSlots:t._u([{key:"icon",fn:function(){return[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 12.04799815248184 17.82773106066078 L 17.6635632622761 20.780008351010338 L 16.591085759324407 14.526984705835558 L 21.134173366167 10.098568770311253 L 14.855780707378965 9.186264915486026 L 12.04799815248184 3.4970760606607936 L 9.240215597584719 9.186264915486026 L 2.9618229387966863 10.09856877031125 L 7.504910545639265 14.526984705835558 L 6.432433042687578 20.780008351010338 L 12.04799815248184 17.82773106066078","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}})])]},proxy:!0},{key:"content",fn:function(){return[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label display-inline mr-2"},[t._v("Radius 1")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.starR1,expression:"starR1",modifiers:{number:!0}}],staticClass:"form-input form-input-radius display-inline",attrs:{type:"number"},domProps:{value:t.starR1},on:{input:function(e){e.target.composing||(t.starR1=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("label",{staticClass:"form-label display-inline mr-2"},[t._v("Radius 2")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.starR2,expression:"starR2",modifiers:{number:!0}}],staticClass:"form-input form-input-radius display-inline",attrs:{type:"number"},domProps:{value:t.starR2},on:{input:function(e){e.target.composing||(t.starR2=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),s("label",{staticClass:"form-label display-inline mr-2"},[t._v("Arms")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.starArms,expression:"starArms",modifiers:{number:!0}}],staticClass:"form-input form-input-radius display-inline",attrs:{type:"number"},domProps:{value:t.starArms},on:{input:function(e){e.target.composing||(t.starArms=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]},proxy:!0}])})],1)]),s("button",{staticClass:"btn btn-secondary btn btn-primary btn-circle btn-xl",attrs:{title:"Copy"},on:{click:function(e){return t.store.copyPastePath()}}},[s("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 3 7 L 17 7 L 17 21 L 3 21 Z","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}}),s("path",{attrs:{d:" M 7 3 L 21 3 L 21 18","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}})])]),s("button",{staticClass:"btn btn-secondary btn btn-primary btn-circle btn-xl",attrs:{title:"Delete"},on:{click:function(e){return t.store.deleteAction()}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 3 6 L 21 6","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"square",fill:"none"}}),s("path",{attrs:{d:" M 5 6 L 5 19 C 5 21 6 22 8 22 L 16 22 C 18 22 19 21 19 19 L 19 5","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 8 6 L 8 3 C 8 3 8 2 9 2 C 10 2 14 2 15 2 C 16 2 16 3 16 3 L 16 6","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 10 10 L 10 18","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 14 10 L 14 18","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}})])])])])},r=[];const l=function(t,e){console.log("createCircle",t,e);const s=.552284749831,i=e,o={x:t.x-e,y:t.y};let n=[];function a(){return(new Date).getTime()}return n.push({type:"M",id:a(),curve1:{},curve2:{},dest:{x:o.x,y:o.y}}),n.push({type:"C",id:a()+1,curve1:{x:o.x,y:o.y-i*s},curve2:{x:o.x+i-i*s,y:o.y-i},dest:{x:o.x+i,y:o.y-i}}),n.push({type:"C",id:a()+2,curve1:{x:o.x+i+i*s,y:o.y-i},curve2:{x:o.x+2*i,y:o.y-i*s},dest:{x:o.x+2*i,y:o.y}}),n.push({type:"C",id:a()+3,curve1:{x:o.x+2*i,y:o.y+i*s},curve2:{x:o.x+i+i*s,y:o.y+i},dest:{x:o.x+i,y:o.y+i}}),n.push({type:"C",id:a()+4,curve1:{x:o.x+i-i*s,y:o.y+i},curve2:{x:o.x,y:o.y+i*s},dest:{x:o.x,y:o.y}}),n};var c=l;const h=function(t,e,s,i){console.log("createStar",t,e,s,i);const o=e,n=s,a=t,r=i,l=Math.PI/r*2;let c=[],h=0;function d(){return(new Date).getTime()}for(let u=0;u<=r;u++){let t={};t.x=a.x+Math.sin(u*l)*o,t.y=a.y+Math.cos(u*l)*o,h+=u;let e=0===u?"M":"L";if(c.push({type:e,id:d()+h,curve1:{},curve2:{},dest:{x:t.x,y:t.y}}),u<r){let t={};t.x=a.x+Math.sin((u+.5)*l)*n,t.y=a.y+Math.cos((u+.5)*l)*n,h+=1,c.push({type:"L",id:d()+h,curve1:{},curve2:{},dest:{x:t.x,y:t.y}})}}return c};var d=h;function u(){return"_"+Math.random().toString(36).substr(2,9)}class p{constructor(t){this.type=t.type,this.id=u(),this.curve1=t.curve1||{},this.curve2=t.curve2||{},this.dest=t.dest}}function v(t,e,s){let i=t-e;return i*=s,i+=e,i}function m(t,e,s,i){let o=Math.PI,n=Math.sin(i*(o/180)),a=Math.cos(i*(o/180));t.x-=e,t.y-=s;let r=t.x*a-t.y*n,l=t.x*n+t.y*a;return t.x=r+e,t.y=l+s,t}class f{constructor(t){this.id=u(),this.definition=t||[],this.isClosed=!1,this.rotation=null,this.scale={x:1,y:1},this.bbox={},this.center={},this.rotationCenter={},this.translate={x:null,y:null},this.strokeLinecap="butt",this.strokeLinejoin="miter",this.strokeWidth=2,this.hasFill=!1}newID(){this.id=u()}addSegment(t){const e=new p(t);return this.definition.push(e),e.id}addSegmentAtStart(t){const e=new p(t);return this.definition.unshift(e),e.id}addSegmentAtPos(t,e){const s=new p(e);return this.definition.splice(t,0,s),s.id}scalePath(t,e,s){const i=this.scale;this.definition.forEach(o=>{"C"===o.type&&(o.curve1.x=v(o.curve1.x,s.x,t/i.x),o.curve1.y=v(o.curve1.y,s.y,e/i.y),o.curve2.x=v(o.curve2.x,s.x,t/i.x),o.curve2.y=v(o.curve2.y,s.y,e/i.y)),o.dest.x=v(o.dest.x,s.x,t/i.x),o.dest.y=v(o.dest.y,s.y,e/i.y)}),this.scale.x=t,this.scale.y=e}splitSegment(t,e){const s=this.definition[t].type;let i;return"C"===s?i=this.splitCurve(t,e):"L"===s&&(i=this.splitLine(t,e)),i}splitLine(t,e){const s=e||.5,i=this.definition[t],o=this.definition[t-1].dest,n=i.dest,a={type:"L",curve1:{},curve2:{},dest:{x:n.x,y:n.y}},r=this.addSegmentAtPos(t+1,a);return n.x=o.x+(n.x-o.x)*s,n.y=o.y+(n.y-o.y)*s,r}splitCurve(t,e){const s=e||.5,i=this.definition[t],o=this.definition[t-1].dest,n=i.curve1,a=i.curve2,r=i.dest;let l,c,h,d,u,p;function v(t,e){const i={};return i.x=(t.x+e.x)*s,i.y=(t.y+e.y)*s,i}l=v(o,n),c=v(n,a),h=v(a,r),d=v(l,c),u=v(c,h),p=v(d,u);const m={type:"C",curve1:{x:u.x,y:u.y},curve2:{x:h.x,y:h.y},dest:{x:r.x,y:r.y}},f=this.addSegmentAtPos(t+1,m);return i.curve1.x=l.x,i.curve1.y=l.y,i.curve2.x=d.x,i.curve2.y=d.y,i.dest.x=p.x,i.dest.y=p.y,f}bakeRotation(){const{rotationCenter:t,rotation:e}=this;this.definition.forEach(s=>{"C"===s.type&&(s.curve1=m(s.curve1,t.x,t.y,e),s.curve2=m(s.curve2,t.x,t.y,e)),s.dest=m(s.dest,t.x,t.y,e)}),this.rotation=0}}const g={history:[],historyPos:-1,allPaths:[],selectedPathIndex:null,selectedPathId:null,multiSelectedPaths:[],tool:"PEN",transformMatrix:null,currentPoint:{},livePreviewSegment:{},selectedPointId:null,selectedPointStep:null,selectedPointIndex:null,isMovingPoint:!1,isMovingPath:!1,clientStartPos:{},movePathStartPos:{},svgPoint:{},isFirstPoint:!0,isDrawing:!1,isSelecting:!1,selectionRect:{},nextCurve:{},currentSegment:"L",snapToGrid:!0,hideControls:!1,viewBox:{x:24,y:24},svgCode:"",zoom:20};function y(t){let e={};return e.x=Math.round(t.x),e.y=Math.round(t.y),e}function x(){const t=document.createElement("div"),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=M.state.viewBox;return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("width",s.x),e.setAttribute("height",s.y),e.setAttribute("viewBox",`0 0 ${s.x} ${s.y}`),e.setAttribute("stroke","currentColor"),e.setAttribute("fill","none"),M.state.allPaths.forEach(t=>{if(!t.definition.length)return;const s=document.createElementNS("http://www.w3.org/2000/svg","path"),i=t.hasFill?"currentColor":"none";let o="";t.definition.forEach(t=>{o+=["",t.type,t.curve1.x,t.curve1.y,t.curve2.x,t.curve2.y,t.dest.x,t.dest.y].map(t=>("number"===typeof t&&(t=Math.round(100*(t+Number.EPSILON))/100),t)).join(" ").replace(/\s+/g," ")}),t.isClosed&&(o+=" Z"),s.setAttribute("d",o),s.setAttribute("stroke-width",t.strokeWidth),s.setAttribute("stroke-linejoin",t.strokeLinejoin),s.setAttribute("stroke-linecap",t.strokeLinecap),s.setAttribute("fill",i),e.appendChild(s)}),t.appendChild(e),t.innerHTML}function P(){const t=x(),e=new Blob([t],{type:"image/svg+xml"}),s=window.URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download="export.svg",i.click()}function b(){SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())}}function w(t){return Object.assign(Object.create(Object.getPrototypeOf(t)),JSON.parse(JSON.stringify(t)))}var C=s("2ef0");b(),window.SELECTED_PATH=void 0;const k={PEN:"PEN",EDIT:"EDIT",SELECT:"SELECT",RECT:"RECT"},L=30,S={debug:!0,state:g,createPath(){this.debug&&console.log("createPath"),this.state.allPaths.push(new f),this.state.selectedPathIndex=this.state.allPaths.length-1,this.state.selectedPathId=this.getPath().id,this.state.isFirstPoint=!0,this.debug&&console.log("index:",this.state.selectedPathIndex),this.debug&&console.log("id:",this.state.selectedPathId)},selectTool(t){this.debug&&console.log("selectTool",t),this.state.tool=t,t!==k.PEN&&t!==k.RECT||(this.state.isFirstPoint=!0)},handleMouseDown(t,e){this.debug&&console.log("handleMouseDown");const{selectedPointIndex:s,selectedPathIndex:i}=this.state;let o;e&&(this.state.transformMatrix=e.getScreenCTM().inverse()),this.state.svgPoint=document.querySelector("#app svg").createSVGPoint();let n=this.state.svgPoint;switch(n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(this.state.transformMatrix),this.state.snapToGrid&&(n=y(n)),this.state.clientStartPos={x:n.x,y:n.y},null!==i&&(this.state.movePathStartPos=JSON.parse(JSON.stringify(this.getPath().definition)),o=this.getPath().definition.length,this.updateBBox()),this.state.tool){case k.PEN:this.state.isDrawing=!0,o-1!==s||this.state.isFirstPoint?0!==s||this.state.isFirstPoint?this.state.isFirstPoint&&(this.debug&&console.log("new"),this.createPath(),this.addSegment(t,"NEW")):(this.debug&&console.log("start"),this.addSegment(t,"START")):(this.debug&&console.log("end"),this.addSegment(t,"END"));break;case k.RECT:this.createPath(),this.addSegment(t,"NEW"),this.addSegment(t,"END"),this.addSegment(t,"END"),this.addSegment(t,"END"),this.addSegment(t,"END"),this.getPath().isClosed=!0,this.state.isDrawing=!0;break;case k.SELECT:this.state.isSelecting=!0;break;default:return}},handleMouseMove(t){if(this.state.tool===k.PEN&&!this.state.isMovingPoint){if(!this.getPath())return;if(0===this.getPath().definition.length)return;let e=this.state.svgPoint;e.x=t.clientX,e.y=t.clientY,e=e.matrixTransform(this.state.transformMatrix),this.state.snapToGrid&&(e=y(e)),this.state.livePreviewSegment={type:"L",dest:{x:e.x,y:e.y}}}this.state.tool===k.PEN&&this.state.isDrawing&&this.drawBezier(t),this.state.tool===k.RECT&&this.state.isDrawing&&this.drawRect(t),this.state.isMovingPoint&&this.movePoint(t),this.state.tool===k.SELECT&&this.state.isMovingPath&&this.movePath(t),this.state.tool===k.SELECT&&this.state.isSelecting&&!this.state.isMovingPath?this.drawSelectionRect(t):this.state.isSelecting=!1},handleMouseUp(){let{selectedPathIndex:t,selectedPointIndex:e}=this.state;(this.state.isMovingPoint||this.state.isMovingPath||this.state.isDrawing)&&this.historySnapshot(),this.state.isMovingPoint=!1,this.state.isMovingPath=!1,this.state.isDrawing=!1,this.state.selectionRect={},console.log("selectionRect is empty"),setTimeout(()=>{this.state.isSelecting=!1},100),null!==t&&(this.updateBBox(),this.updatePathCenter(this.getPath().bbox)),null!==t&&null!==e&&(this.state.currentPoint=this.getSegment().dest)},drawBezier(t){let{selectedPathIndex:e,selectedPointIndex:s,snapToGrid:i}=this.state,o=this.getPath().definition[s].dest,n={},a=this.state.svgPoint;if(a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(this.state.transformMatrix),i&&(a=y(a)),a.x=o.x-(a.x-o.x),a.y=o.y-(a.y-o.y),0===s){let t=this.getSegment(e,1),s=this.getSegment(e,2);n.x=t.dest.x-(s.curve1.x-t.dest.x)||t.dest.x,n.y=t.dest.y-(s.curve1.y-t.dest.y)||t.dest.y,this.updateType("C",e,1),this.updateCurve1({x:a.x,y:a.y},e,1),this.updateCurve2({x:n.x,y:n.y},e,1)}else{let t=this.getSegment(e,s-1);n.x=t.dest.x-(t.curve2.x-t.dest.x)||t.dest.x,n.y=t.dest.y-(t.curve2.y-t.dest.y)||t.dest.y,this.updateType("C"),this.updateCurve1({x:n.x,y:n.y}),this.updateCurve2({x:a.x,y:a.y})}},drawRect(t){let{snapToGrid:e,selectedPathIndex:s}=this.state,i=this.state.svgPoint;i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(this.state.transformMatrix),e&&(i=y(i));let o=this.getSegment(s,0).dest;if(t.shiftKey){console.log("shift");const t=i.x-o.x,e=o.y+t;this.updateDest({x:o.x,y:e},s,1),this.updateDest({x:i.x,y:e},s,2),this.updateDest({x:i.x,y:o.y},s,3)}else this.updateDest({x:o.x,y:i.y},s,1),this.updateDest({x:i.x,y:i.y},s,2),this.updateDest({x:i.x,y:o.y},s,3)},drawSelectionRect(t){const{selectionRect:e,allPaths:s}=this.state;let i=this.state.svgPoint;i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(this.state.transformMatrix);const o=this.state.clientStartPos;let n=i.x-o.x,a=i.y-o.y,r=o.x,l=o.y;n<0&&(n=Math.abs(n),r=i.x),a<0&&(a=Math.abs(a),l=i.y),this.state.selectionRect={x:r,y:l,width:n,height:a},s.forEach((t,s)=>{const i={Left:e.x,Right:e.x+e.width,Top:e.y,Bottom:e.y+e.height},o={Left:t.bbox.x,Right:t.bbox.x+t.bbox.width,Top:t.bbox.y,Bottom:t.bbox.y+t.bbox.height};i.Left<o.Right&&i.Right>o.Left&&i.Bottom>o.Top&&i.Top<o.Bottom&&this.addToMultiSelect(s)})},movePoint(t){const{selectedPathIndex:e,selectedPointIndex:s,selectedPointStep:i,movePathStartPos:o}=this.state;let n=this.state.svgPoint;if(n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(this.state.transformMatrix),this.state.snapToGrid&&(n=y(n)),this.getSegment()[i]={x:n.x,y:n.y},"dest"===i&&!t.altKey){let t={};const i=this.getSegment().type,a=this.getSegment(e,s+1),r=a?a.type:null;if(t.x=n.x-this.state.clientStartPos.x,t.y=n.y-this.state.clientStartPos.y,"C"===i){const e=o[s].curve2.x+t.x,i=o[s].curve2.y+t.y;this.updateCurve2({x:e,y:i})}if("C"===r){const i=o[s+1].curve1.x+t.x,n=o[s+1].curve1.y+t.y;this.updateCurve1({x:i,y:n},e,s+1)}}},movePath(t){const{multiSelectedPaths:e}=this.state;this.state.isMovingPath=!0;let s={},i=this.state.svgPoint;if(i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(this.state.transformMatrix),this.state.snapToGrid&&(i=y(i)),s.x=i.x-this.state.clientStartPos.x,s.y=i.y-this.state.clientStartPos.y,e.length>1)for(let o=0;o<e.length;o++){const t=e[o];this.movePathByPx(this.getPath(t),s.x,s.y)}else{const t=this.getPath();this.movePathByPx(t,s.x,s.y)}this.state.clientStartPos.x=i.x,this.state.clientStartPos.y=i.y},movePathByPx(t,e,s){t&&t.definition.forEach(t=>{"Z"!==t.type&&(t.dest.x+=e,t.dest.y+=s,void 0!==t.curve1.x&&(t.curve1.x+=e,t.curve1.y+=s),void 0!==t.curve2.x&&(t.curve2.x+=e,t.curve2.y+=s))})},addSegment(t,e){this.debug&&console.log("addSegment",e);let{selectedPointIndex:s}=this.state,i=document.querySelector("#app svg").createSVGPoint();if(i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(this.state.transformMatrix),this.state.snapToGrid&&(i=y(i)),this.state.currentPoint={x:i.x,y:i.y},"END"===e){const t=this.getPath().addSegment({type:"L",dest:{x:i.x,y:i.y}});this.state.selectedPointId=t,this.state.selectedPointIndex++}if("START"===e){const t=this.getPath().addSegmentAtStart({type:"M",dest:{x:i.x,y:i.y}});this.getPath().definition[s+1].type="L",this.state.selectedPointId=t,this.state.selectedPointIndex=0}if("NEW"===e){const t=this.getPath().addSegment({type:"M",dest:{x:i.x,y:i.y}});this.state.isDrawing=!1,this.state.selectedPointId=t,this.state.selectedPointIndex=0}if(this.state.isFirstPoint=!1,window.SELECTED_PATH){let t=window.SELECTED_PATH.getBBox();this.updateBBox(),this.updatePathCenter(t),this.updateRotationCenter()}this.historySnapshot()},continuePath(t,e,s,i){this.debug&&console.log("continuePath"),this.state.selectedPathId=t,this.state.selectedPathIndex=e,this.state.selectedPointId=s,this.state.selectedPointIndex=i,this.state.isFirstPoint=!1},deleteAction(){this.debug&&console.log("delete");const{tool:t}=this.state;t===k.PEN||t===k.EDIT?this.deleteSegment():t===k.SELECT&&this.deletePath(),this.historySnapshot()},deletePath(t){t=t||this.state.selectedPathIndex,null!==t&&(this.state.allPaths.splice(t,1),this.unselectPath())},deleteSegment(t,e){this.debug&&console.log("deleteSegment"),e=e||this.state.selectedPointIndex,t=t||this.state.selectedPathIndex,null!==e&&(0===e&&this.getPath().definition.length>1&&(this.updateType("M",t,1),this.updateCurve1({},t,1),this.updateCurve2({},t,1)),this.getPath().definition.splice(this.state.selectedPointIndex,1),this.state.selectedPointIndex=null,this.state.selectedPointId=null),this.updateBBox()},splitPath(t,e,s){t=t||this.state.selectedPathIndex,e=e||this.state.selectedPointIndex,s=s||!0;const i=this.getPath(t).definition.length-1;if(e===i||0===e)return void this.deleteSegment(t,e);const o=this.getPath(t).definition.splice(0,e);s&&this.getPath(t).definition.shift(),this.updateType("M",t,0),this.updateCurve1({},t,0),this.updateCurve2({},t,0),this.getPath(t).definition.length<=1&&this.deletePath(t),o.length>1&&this.state.allPaths.push(new f(o))},selectPath(t,e,s){this.debug&&console.log("selectPath",t,e,s);const{tool:i}=this.state;if(s=s||{},i===k.EDIT||i===k.SELECT){this.state.selectedPathId!==t&&this.unselectPoint(),this.state.selectedPathId=t,this.state.selectedPathIndex=e;const i=this.state.multiSelectedPaths.indexOf(e)>=0,o=this.state.multiSelectedPaths.length>1;s.shiftKey||i||!o||(this.state.multiSelectedPaths=[],this.addToMultiSelect(e))}s.shiftKey&&this.addToMultiSelect(e),this.updateBBox()},addToMultiSelect(t){-1===this.state.multiSelectedPaths.indexOf(t)&&(this.state.multiSelectedPaths.push(t),console.log("multi",this.state.multiSelectedPaths))},unselectPath(){this.debug&&console.log("unselectPath"),this.state.selectedPathId=null,this.state.selectedPathIndex=null,this.state.multiSelectedPaths=[]},unselectPoint(){this.debug&&console.log("unselectPoint"),this.state.selectedPointIndex=null,this.state.selectedPointId=null},setSelectedPoint(t,e){this.state.isMovingPoint=!0,this.state.selectedPointId=t,this.state.selectedPointStep=e,this.state.selectedPointIndex=this.getPath().definition.findIndex(e=>e.id===t),this.state.svgPoint=document.querySelector("#app svg").createSVGPoint(),this.state.currentPoint=this.getSegment().dest},getPath(t=this.state.selectedPathIndex){return this.state.allPaths[t]},getSegment(t=this.state.selectedPathIndex,e=this.state.selectedPointIndex){return this.state.allPaths[t].definition[e]},updateType(t,e=this.state.selectedPathIndex,s=this.state.selectedPointIndex){this.state.allPaths[e].definition[s].type=t},updateCurve1(t,e=this.state.selectedPathIndex,s=this.state.selectedPointIndex){this.state.allPaths[e].definition[s].curve1=t},updateCurve2(t,e=this.state.selectedPathIndex,s=this.state.selectedPointIndex){this.state.allPaths[e].definition[s].curve2=t},updateDest(t,e=this.state.selectedPathIndex,s=this.state.selectedPointIndex){this.state.allPaths[e].definition[s].dest=t},addCircle(t,e){const s=c(t,e);this.createPath(),this.getPath().definition=s,this.getPath().isClosed=!0,this.historySnapshot()},addStar(t,e,s,i){const o=d(t,e,s,i);this.createPath(),this.getPath().definition=o,this.getPath().isClosed=!0,this.historySnapshot()},updateBBox(){this.debug&&console.log("updateBBox");const{selectedPathIndex:t}=this.state;if(window.SELECTED_PATH&&void 0!==t){const t=window.SELECTED_PATH.getBBox();this.getPath().bbox=t,this.updatePathCenter(t)}},updatePathCenter(t){let e={x:t.x+t.width/2,y:t.y+t.height/2};this.getPath().center=e},updateRotation(t){this.getPath().rotation=t,this.updateRotationCenter(),this.state.transformMatrix=window.SELECTED_PATH.getScreenCTM().inverse()},updateRotationCenter(){let t=this.getPath().center;this.getPath().rotationCenter=t},bakeRotation(){this.getPath().bakeRotation(),this.state.transformMatrix=window.SELECTED_PATH.getScreenCTM().inverse(),this.updateBBox(),this.historySnapshot()},updateScale(t,e,s){s=s||this.getPath().center,this.getPath().scalePath(t,e,s)},resetScale(){this.getPath().scale.x=1,this.getPath().scale.y=1},historySnapshot(){this.debug&&console.log("historySnapshot"),this.state.historyPos>-1&&(this.state.history.splice(0,this.state.historyPos+1),console.log("snapshot clear",this.state.history),this.state.historyPos=-1),this.state.history.length>L-1&&this.state.history.splice(-1,1);const t=Object(C["cloneDeep"])(this.state.allPaths);this.state.history.unshift(t)},setHistoryPos(t){this.debug&&console.log("setHistoryPos",t),this.state.historyPos+=t},historyGoTo(t=0){this.debug&&console.log("historyGoTo",t),t>=L-1||t>=this.state.history.length-1||(i["a"].set(this.state,"allPaths",Object(C["cloneDeep"])(this.state.history[t+1])),this.selectTool(this.state.tool),this.state.selectedPathIndex=null,this.state.selectedPathId=null,this.state.currentPoint={},this.state.livePreviewSegment={},this.state.selectedPointId=null,this.state.selectedPointStep=null,this.state.selectedPointIndex=null,this.state.isFirstPoint=!0)},setStrokeLinecap(t){this.getPath().strokeLinecap=t},setStrokeLinejoin(t){this.getPath().strokeLinejoin=t},setStrokeWidth(t){this.getPath().strokeWidth=t},joinPoints(t){this.getPath(t).isClosed=!0},copyPath(){const t=w(this.getPath());return t.newID(),t},pastePath(t){this.state.allPaths.push(t),this.selectPath(t.id,this.state.allPaths.length-1),this.unselectPoint()},copyPastePath(){const t=this.copyPath();this.pastePath(t)},splitSegment(t){this.debug&&console.log("splitSegment",t);const{selectedPointIndex:e}=this.state,s=this.getPath().splitSegment(e,t);this.state.selectedPointId=s,this.state.selectedPointIndex=e+1,this.state.currentPoint=this.getPath().definition[e+1].dest},createSVG(){S.state.svgCode=x()},exportSVG(){P()}};var M=S,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shape-modal"},[s("button",{staticClass:"btn btn-primary btn btn-primary btn-circle btn-xl",attrs:{title:t.btnTitle},on:{click:function(e){t.open=!0}}},[t._t("icon")],2),s("div",{staticClass:"modal-container",class:{open:t.open}},[s("div",{staticClass:"overlay",on:{click:function(e){t.open=!1}}}),s("div",{staticClass:"modal-content"},[s("span",{staticClass:"float-right modal-close",on:{click:function(e){t.open=!1}}},[t._v("×")]),s("h3",[t._v(t._s(t.modalTitle))]),t._t("content"),s("button",{staticClass:"btn btn-primary",on:{click:t.confirm}},[t._v("Okay")])],2)])])},T=[],_={name:"ShapeModal",props:{modalTitle:String,btnTitle:String},data:function(){return{open:!1}},methods:{confirm:function(){this.open=!1,this.$emit("confirm")}}},I=_,B=(s("d55b"),s("2877")),j=Object(B["a"])(I,E,T,!1,null,"02e3035c",null),A=j.exports,R={name:"LeftPanel",components:{ShapeModal:A},data:function(){return{store:M,circleRadius:2,starR1:2,starR2:5,starArms:5}},methods:{addCircle:function(){this.store.addCircle({x:12,y:12},this.circleRadius)},addStar:function(){this.store.addStar({x:12,y:12},this.starR1,this.starR2,this.starArms)}}},D=R,N=(s("8edb"),Object(B["a"])(D,a,r,!1,null,"51f881b6",null)),$=N.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-right-panel shadow position-absolute top-0 right-0 h-100"},[null!==t.store.state.selectedPathIndex?s("div",{staticClass:"accordion"},[s("AccordionItem",{attrs:{open:!0,title:"Transformation"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Rotation")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.rotate,expression:"rotate",modifiers:{number:!0}}],staticClass:"form-input-range w-50 display-inline mr-2",attrs:{type:"range",min:"0",max:"360"},domProps:{value:t.rotate},on:{focus:t.updateCenter,blur:[function(e){return t.bakeRotation()},function(e){return t.$forceUpdate()}],__r:function(e){t.rotate=t._n(e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.rotate,expression:"rotate",modifiers:{number:!0}}],staticClass:"form-input w-25 display-inline mr-1",attrs:{type:"number"},domProps:{value:t.rotate},on:{focus:t.updateCenter,blur:[function(e){return t.bakeRotation()},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.rotate=t._n(e.target.value))}}}),s("button",{staticClass:"btn btn-alt-gray-3 btn-sm btn-circle",on:{click:function(e){return t.bakeRotation()}}},[s("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 4 12 L 8 17 L 20 7","stroke-width":"2"}})])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Scale")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],staticClass:"form-input-range w-50 display-inline mr-2",attrs:{type:"range",min:"0.01",max:"5",step:"0.01"},domProps:{value:t.scale},on:{focus:t.updateCenter,blur:[t.resetScaleVal,function(e){return t.$forceUpdate()}],__r:function(e){t.scale=t._n(e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.scale,expression:"scale",modifiers:{number:!0}}],staticClass:"form-input w-25 display-inline mr-1",attrs:{type:"number",min:"0.01",step:"0.01"},domProps:{value:t.scale},on:{focus:t.updateCenter,blur:[t.resetScaleVal,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.scale=t._n(e.target.value))}}}),s("button",{staticClass:"btn btn-alt-gray-3 btn-sm btn-circle",on:{click:t.resetScaleVal}},[s("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 4 12 L 8 17 L 20 7","stroke-width":"2"}})])])])]),s("AccordionItem",{attrs:{open:!0,title:"Style"}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Line Join")]),s("div",{staticClass:"btn-group"},[s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinejoin,expression:"strokeLinejoin"}],attrs:{value:"miter",type:"radio",name:"radio-linejoin"},domProps:{checked:t._q(t.strokeLinejoin,"miter")},on:{change:function(e){t.strokeLinejoin="miter"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 3 21 L 3 3 L 21 3 L 21 21 Z M 12 21 L 12 12 L 21 12 ","stroke-width":"2"}})])])]),s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinejoin,expression:"strokeLinejoin"}],attrs:{value:"round",type:"radio",name:"radio-linejoin"},domProps:{checked:t._q(t.strokeLinejoin,"round")},on:{change:function(e){t.strokeLinejoin="round"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 3 21 S 3 11 3 11 C 3 6 6 3 11 3 L 21 3 L 21 21 Z M 12 21 L 12 12 L 21 12 ","stroke-width":"2"}})])])]),s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinejoin,expression:"strokeLinejoin"}],attrs:{value:"bevel",type:"radio",name:"radio-linejoin"},domProps:{checked:t._q(t.strokeLinejoin,"bevel")},on:{change:function(e){t.strokeLinejoin="bevel"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 3 21 L 3 11 L 11 3 L 21 3 L 21 21 Z M 12 21 L 12 12 L 21 12 ","stroke-width":"2"}})])])])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Line End")]),s("div",{staticClass:"btn-group"},[s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinecap,expression:"strokeLinecap"}],attrs:{value:"round",type:"radio",name:"radio-linecap"},domProps:{checked:t._q(t.strokeLinecap,"round")},on:{change:function(e){t.strokeLinecap="round"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 11 21 C 0 21 0 3 11 3 L 21 3 L 21 21 Z M 12 12 L 21 12 Z M 12 15 L 12 9 M 11 3 ","stroke-width":"2"}})])])]),s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinecap,expression:"strokeLinecap"}],attrs:{value:"butt",type:"radio",name:"radio-linecap"},domProps:{checked:t._q(t.strokeLinecap,"butt")},on:{change:function(e){t.strokeLinecap="butt"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 11 21 L 11 3 L 21 3 L 21 21 Z M 12 12 L 21 12 Z M 12 15 L 12 9 ","stroke-width":"2"}})])])]),s("label",{staticClass:"btn btn-alt-gray-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.strokeLinecap,expression:"strokeLinecap"}],attrs:{value:"square",type:"radio",name:"radio-linecap"},domProps:{checked:t._q(t.strokeLinecap,"square")},on:{change:function(e){t.strokeLinecap="square"}}}),s("i",{staticClass:"radio"}),s("span",[s("svg",{attrs:{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 21 L 3 21 L 3 3 L 21 3 L 21 21 Z M 12 12 L 21 12 Z M 12 15 L 12 9 ","stroke-width":"2"}})])])])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("Stroke width")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.strokeWidth,expression:"strokeWidth",modifiers:{number:!0}}],staticClass:"form-input-range w-50 display-inline mr-2",attrs:{type:"range",min:"0",max:"6",step:"0.5"},domProps:{value:t.strokeWidth},on:{__r:function(e){t.strokeWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.strokeWidth,expression:"strokeWidth",modifiers:{number:!0}}],staticClass:"form-input w-25 display-inline",attrs:{type:"number"},domProps:{value:t.strokeWidth},on:{input:function(e){e.target.composing||(t.strokeWidth=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.hasFill,expression:"hasFill",modifiers:{number:!0}}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hasFill)?t._i(t.hasFill,null)>-1:t.hasFill},on:{change:function(e){var s=t.hasFill,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=t._n(null),a=t._i(s,n);i.checked?a<0&&(t.hasFill=s.concat([n])):a>-1&&(t.hasFill=s.slice(0,a).concat(s.slice(a+1)))}else t.hasFill=o}}}),s("i",{staticClass:"switch"}),s("span",{staticClass:"ml-1"},[t._v("Fill")])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.isClosed,expression:"isClosed",modifiers:{number:!0}}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isClosed)?t._i(t.isClosed,null)>-1:t.isClosed},on:{change:function(e){var s=t.isClosed,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=t._n(null),a=t._i(s,n);i.checked?a<0&&(t.isClosed=s.concat([n])):a>-1&&(t.isClosed=s.slice(0,a).concat(s.slice(a+1)))}else t.isClosed=o}}}),s("i",{staticClass:"switch"}),s("span",{staticClass:"ml-1"},[t._v("Close Path")])])])]),"M"!==t.segmentType&&"EDIT"===t.store.state.tool&&t.store.state.selectedPointId?s("AccordionItem",{attrs:{title:"Segment Settings",open:!0}},[t._v(" Segment Type "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.segmentType,expression:"segmentType"}],staticClass:"round bg-gray-3 text-light p-1 mb-2",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.segmentType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"L"}},[t._v("Line")]),s("option",{attrs:{value:"C"}},[t._v("Curve")])]),s("br"),s("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.store.splitSegment(.5)}}},[s("svg",{staticClass:"mr-1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 2 2 L 2 6 L 6 6 L 6 2 L 2 2","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 6 4 C 13 4 20 11 20 18","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 18 18 L 18 22 L 22 22 L 22 18 L 18 18","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}}),s("path",{attrs:{d:" M 18 6 L 13 11","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt",fill:"none"}})]),t._v(" Split Segment ")])]):t._e(),s("AccordionItem",{attrs:{title:"Export",open:!0}},[s("code",{staticClass:"bg-gray-3 text-light p-2 mb-2 display-block round",attrs:{id:"svg-code-output"}},[t._v(" "+t._s(t.store.state.svgCode)+" ")]),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-alt-gray-3 w-50 mb-0 float-none",on:{click:t.createSVGCode}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 10 4 L 2 12 L 10 20","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}}),s("path",{attrs:{d:" M 14 20 L 22 12 L 14 4.000000000000001","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}})])]),s("button",{staticClass:"btn btn-gray-3 w-50 mb-0 float-none",on:{click:t.store.exportSVG}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none"}},[s("path",{attrs:{d:" M 12 3 L 12 15","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}}),s("path",{attrs:{d:" M 8 11 L 12 15 L 16 11","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}}),s("path",{attrs:{d:" M 3 17 L 3 21 L 21 21 L 21 17","stroke-width":"2","stroke-linejoin":"miter","stroke-linecap":"butt"}})])])])])],1):t._e()])},G=[],H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"accordion-item",class:{open:t.isOpen}},[s("div",{staticClass:"accordion-btn text-uppercase text-bold",on:{click:function(e){t.isOpen=!t.isOpen}}},[t._v(" "+t._s(t.title)+" ")]),s("div",{staticClass:"accordion-content-wrapper"},[s("div",{staticClass:"accordion-content"},[t._t("default")],2)])])},F=[],X={name:"AccordionItem",props:{title:String,open:Boolean},data:function(){return{isOpen:this.open||!1}}},Y=X,W=(s("bfc3"),Object(B["a"])(Y,H,F,!1,null,"5f953900",null)),Z=W.exports,U={name:"RightPanel",components:{AccordionItem:Z},data:function(){return{store:M}},computed:{rotate:{get(){return this.store.state.allPaths[this.store.state.selectedPathIndex].rotation||0},set(t){this.store.updateRotation(t)}},scale:{get(){return this.store.state.allPaths[this.store.state.selectedPathIndex].scale.x||1},set(t){t>=.1&&this.store.updateScale(t,t)}},strokeLinecap:{get(){return this.store.state.allPaths[M.state.selectedPathIndex].strokeLinecap},set(t){this.store.setStrokeLinecap(t)}},strokeLinejoin:{get(){return this.store.state.allPaths[M.state.selectedPathIndex].strokeLinejoin},set(t){this.store.setStrokeLinejoin(t)}},strokeWidth:{get(){return this.store.state.allPaths[M.state.selectedPathIndex].strokeWidth},set(t){this.store.setStrokeWidth(t)}},hasFill:{get(){return this.store.state.allPaths[M.state.selectedPathIndex].hasFill},set(t){this.store.state.allPaths[M.state.selectedPathIndex].hasFill=t}},isClosed:{get(){return this.store.state.allPaths[M.state.selectedPathIndex].isClosed},set(t){this.store.state.allPaths[M.state.selectedPathIndex].isClosed=t}},segmentType:{get(){const{allPaths:t,selectedPathIndex:e,selectedPointIndex:s}=this.store.state;if(null!==s)return t[e].definition[s].type},set(t){"C"===t&&(this.store.state.allPaths[M.state.selectedPathIndex].definition[M.state.selectedPointIndex].curve1={x:0,y:0},this.store.state.allPaths[M.state.selectedPathIndex].definition[M.state.selectedPointIndex].curve2={x:0,y:0}),"L"===t&&(this.store.state.allPaths[M.state.selectedPathIndex].definition[M.state.selectedPointIndex].curve1={},this.store.state.allPaths[M.state.selectedPathIndex].definition[M.state.selectedPointIndex].curve2={}),this.store.state.allPaths[M.state.selectedPathIndex].definition[M.state.selectedPointIndex].type=t}}},methods:{resetScaleVal:function(){this.store.resetScale(),this.store.historySnapshot()},updateCenter:function(){if(window.SELECTED_PATH){const t=window.SELECTED_PATH.getBBox();this.store.updatePathCenter(t),this.store.updateRotationCenter()}},bakeRotation:function(){this.store.bakeRotation()},createSVGCode:function(){this.store.createSVG(),setTimeout(()=>{var t=document.createRange();t.selectNode(document.getElementById("svg-code-output")),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges()},100)}}},z=U,V=(s("40c8"),Object(B["a"])(z,O,G,!1,null,"b894e2fc",null)),q=V.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-top-panel p-1"},[s("button",{staticClass:"btn btn-alt-gray-3 btn-sm mr-1 mb-0",on:{click:t.historyUndo}},[s("svg",{attrs:{width:"24",height:"16",viewBox:"0 0 24 16",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 17 C 21 13 18 10 14 10 L 4 10 M 7 6 L 3 10 L 7 14 ","stroke-width":"2"}})])]),s("button",{staticClass:"btn btn-alt-gray-3 btn-primary btn-sm mb-0",class:{disabled:-1===t.store.state.historyPos},attrs:{disabled:-1===t.store.state.historyPos},on:{click:t.historyRedo}},[s("svg",{attrs:{width:"24",height:"16",viewBox:"0 0 24 16",fill:"none",stroke:"currentColor"}},[s("path",{attrs:{d:"M 21 17 C 21 13 18 10 14 10 L 4 10 M 7 6 L 3 10 L 7 14 ","stroke-width":"2",transform:"scale(-1,1) translate(-24,0)"}})])]),s("label",{staticClass:"mx-2"},[t._v("Width")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.store.state.viewBox.x,expression:"store.state.viewBox.x"}],staticClass:"canvas-size-input form-input display-inline my-0 bg-gray-3 text-light border-0",attrs:{type:"number"},domProps:{value:t.store.state.viewBox.x},on:{input:function(e){e.target.composing||t.$set(t.store.state.viewBox,"x",e.target.value)}}}),s("label",{staticClass:"mx-2"},[t._v("Height")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.store.state.viewBox.y,expression:"store.state.viewBox.y"}],staticClass:"canvas-size-input form-input display-inline my-0 bg-gray-3 text-light border-0",attrs:{type:"number"},domProps:{value:t.store.state.viewBox.y},on:{input:function(e){e.target.composing||t.$set(t.store.state.viewBox,"y",e.target.value)}}}),s("label",{staticClass:"mx-2"},[t._v("Zoom")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.store.state.zoom,expression:"store.state.zoom"}],staticClass:"canvas-size-input form-input display-inline my-0 bg-gray-3 text-light border-0",attrs:{type:"number"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.store.state,"zoom",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0"}},[t._v("auto")]),s("option",{attrs:{value:"1"}},[t._v("100%")]),s("option",{attrs:{value:"2"}},[t._v("200%")]),s("option",{attrs:{value:"4"}},[t._v("400%")]),s("option",{attrs:{value:"10"}},[t._v("1000%")]),s("option",{attrs:{value:"20"}},[t._v("2000%")])]),s("div",{staticClass:"display-inline py-2 px-4"},[s("div",{staticClass:"form-group display-inline ml-2"},[s("label",{staticClass:"form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.store.state.snapToGrid,expression:"store.state.snapToGrid"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.store.state.snapToGrid)?t._i(t.store.state.snapToGrid,null)>-1:t.store.state.snapToGrid},on:{change:function(e){var s=t.store.state.snapToGrid,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&t.$set(t.store.state,"snapToGrid",s.concat([n])):a>-1&&t.$set(t.store.state,"snapToGrid",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.store.state,"snapToGrid",o)}}}),s("i",{staticClass:"switch"}),s("span",[t._v("Snap to Grid")])])]),s("div",{staticClass:"form-group display-inline ml-2"},[s("label",{staticClass:"form-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.store.state.hideControls,expression:"store.state.hideControls"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.store.state.hideControls)?t._i(t.store.state.hideControls,null)>-1:t.store.state.hideControls},on:{change:function(e){var s=t.store.state.hideControls,i=e.target,o=!!i.checked;if(Array.isArray(s)){var n=null,a=t._i(s,n);i.checked?a<0&&t.$set(t.store.state,"hideControls",s.concat([n])):a>-1&&t.$set(t.store.state,"hideControls",s.slice(0,a).concat(s.slice(a+1)))}else t.$set(t.store.state,"hideControls",o)}}}),s("i",{staticClass:"switch"}),s("span",[t._v("Hide Controls")])])])])])},J=[],Q={name:"TopPanel",data:function(){return{store:M}},methods:{historyUndo(){this.store.state.historyPos!==this.store.state.history.length-1&&(this.store.setHistoryPos(1),this.store.historyGoTo(this.store.state.historyPos))},historyRedo(){-1!==this.store.state.historyPos&&(this.store.setHistoryPos(-1),this.store.historyGoTo(this.store.state.historyPos))}}},tt=Q,et=(s("88b0"),Object(B["a"])(tt,K,J,!1,null,"f887f87c",null)),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v_app-canvas position-relative shadow",class:{"cursor-pen":"PEN"===t.store.state.tool,"hide-grid":t.store.state.hideControls},style:{backgroundSize:100/t.store.state.viewBox.x+"% "+100/t.store.state.viewBox.y+"%",width:t.store.state.zoom>0?t.store.state.viewBox.x*t.store.state.zoom+"px":"auto",maxWidth:t.store.state.zoom>0?"initial":"500px"},on:{mouseup:t.endPointMove}},[s("svg",{staticClass:"w-100",attrs:{stroke:"black",viewBox:"0 0 "+t.store.state.viewBox.x+" "+t.store.state.viewBox.y}},[s("g",{staticClass:"fallback-ref"}),t._l(t.store.state.allPaths,(function(t,e){return s("SvgPath",{key:t.id,ref:t.id,refInFor:!0,attrs:{definition:t.definition,path:t,id:t.id,index:e}})})),"SELECT"===t.store.state.tool&&t.store.state.selectionRect!=={}&&t.store.state.isSelecting&&!t.store.state.isMovingPath?s("rect",{staticClass:"selection-rect",attrs:{x:t.store.state.selectionRect.x,y:t.store.state.selectionRect.y,width:t.store.state.selectionRect.width,height:t.store.state.selectionRect.height}}):t._e()],2),s("ControlsLayer",{on:{handleMouseDown:t.handleMouseDown,handleMouseMove:t.handleMouseMove}})],1)},ot=[],nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("path",{ref:"path",staticClass:"svg-path",class:{active:t.isActive},attrs:{d:t.dToString,transform:t.transform,"stroke-linecap":t.path.strokeLinecap,"stroke-linejoin":t.path.strokeLinejoin,"stroke-width":t.path.strokeWidth,fill:t.path.hasFill?"currentColor":"none"}})},at=[],rt={name:"SvgPath",props:{definition:Array,id:String,index:Number,path:Object},data:function(){return{store:M,parentReference:{}}},computed:{dToString:function(){let t="";return this.definition.forEach(e=>{t+=[e.type,e.curve1.x,e.curve1.y,e.curve2.x,e.curve2.y,e.dest.x,e.dest.y].join(" ")}),this.path.isClosed&&(t+=" Z"),t},isActive:function(){return this.store.state.selectedPathId===this.id},transform:function(){let t="";return this.path.rotation&&(t+=`rotate(${this.path.rotation} ${this.path.rotationCenter.x} ${this.path.rotationCenter.y}) `),t}},updated:function(){const{selectedPathId:t}=this.store.state;this.id===t&&window.SELECTED_PATH!==this.$refs.path&&(window.SELECTED_PATH=this.$refs.path)},mounted:function(){const{selectedPathId:t}=this.store.state;this.id===t&&(window.SELECTED_PATH=this.$refs.path),this.parentReference=this.$refs.path.parentElement}},lt=rt,ct=(s("6d2a"),Object(B["a"])(lt,nt,at,!1,null,"34d716b0",null)),ht=ct.exports,dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return this.store.state.hideControls?t._e():s("svg",{ref:"svg",staticClass:"controls-layer position-absolute w-100 h-100 top-0 left-0",on:{mousedown:t.handleMouseDown,click:t.handleClick,mousemove:t.handleMouseMove}},[t._l(t.store.state.allPaths,(function(e,i){return s("EditPath",{key:e.id,attrs:{definition:e.definition,path:e,id:e.id,index:i,scaleX:t.scaleX,scaleY:t.scaleY}})})),t._l(t.store.state.allPaths,(function(e,i){return s("g",{key:"group-"+e.id,class:{active:e.id===t.store.state.selectedPathId},attrs:{transform:t.transform(e)}},[t._l(e.definition,(function(o,n){return s("g",{key:"seg-"+o.id,class:{hide:i!==t.store.state.selectedPathIndex||"SELECT"===t.store.state.tool},attrs:{stroke:"none",fill:"#363bd2"}},[o.id===t.store.state.selectedPointId&&"Z"!==o.type&&"M"!==o.type?s("path",{attrs:{id:"active-segment",d:t.activeSegment,stroke:"#363bd2","stroke-width":"10",fill:"none"}}):t._e(),"C"===o.type?s("path",{attrs:{d:"M"+e.definition[n-1].dest.x*t.scaleX+" "+e.definition[n-1].dest.y*t.scaleY+" L "+o.curve1.x*t.scaleX+" "+o.curve1.y*t.scaleY,stroke:"#363bd2","stroke-width":"1"}}):t._e(),"C"===o.type?s("circle",{staticClass:"cursor-edit",attrs:{cx:o.curve1.x*t.scaleX,cy:o.curve1.y*t.scaleY,r:"4"},on:{mousedown:function(s){return t.pointHandleMouseDown(s,o.id,n,"curve1",e.id,i)}}}):t._e(),"C"===o.type?s("path",{attrs:{d:"M"+o.dest.x*t.scaleX+" "+o.dest.y*t.scaleY+" L "+o.curve2.x*t.scaleX+" "+o.curve2.y*t.scaleY,stroke:"#363bd2","stroke-width":"1"}}):t._e(),"C"===o.type?s("circle",{staticClass:"cursor-edit",attrs:{cx:o.curve2.x*t.scaleX,cy:o.curve2.y*t.scaleY,r:"4"},on:{mousedown:function(s){return t.pointHandleMouseDown(s,o.id,n,"curve2",e.id,i)}}}):t._e(),"Z"!==o.type?s("rect",{key:"point-"+o.id,staticClass:"path-point cursor-edit",class:{active:o.id===t.store.state.selectedPointId},attrs:{x:o.dest.x*t.scaleX-5,y:o.dest.y*t.scaleY-5,width:"10",height:"10"},on:{mousedown:function(s){return t.pointHandleMouseDown(s,o.id,n,"dest",e.id,i)},mouseup:t.drawLine}}):t._e()])})),"SELECT"===t.store.state.tool?s("rect",{key:"bbox-"+e.id,class:{hide:e.id!==t.store.state.selectedPathId},attrs:{x:e.bbox.x*t.scaleX,y:e.bbox.y*t.scaleY,width:e.bbox.width*t.scaleX||1,height:e.bbox.height*t.scaleY||1,fill:"none",stroke:"#363bd2"}}):t._e()],2)})),t.hasLivePreview?s("path",{class:{hide:t.store.state.hideControls},attrs:{id:"live-preview-path",d:t.livePreview,stroke:"#363bd2",transform:t.transform(t.store.getPath())}}):t._e()],2)},ut=[],pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("path",{ref:"path",staticClass:"edit-path",class:{active:t.isActive,"select-tool":"SELECT"===t.store.state.tool},attrs:{d:t.dToString,fill:t.path.hasFill?"currentColor":"none",transform:t.transform},on:{mousedown:function(e){return t.handleMouseDown(t.id,t.index,e)}}})},vt=[],mt={name:"EditPath",props:{scaleX:Number,scaleY:Number,definition:Array,id:String,index:Number,path:Object},data:function(){return{store:M}},computed:{dToString:function(){let t="";const{scaleX:e,scaleY:s}=this;return this.definition.forEach(i=>{t+=[i.type,void 0!==i.curve1.x?i.curve1.x*e:"",void 0!==i.curve1.y?i.curve1.y*s:"",void 0!==i.curve2.x?i.curve2.x*e:"",void 0!==i.curve2.y?i.curve2.y*s:"",void 0!==i.dest.x?i.dest.x*e:"",void 0!==i.dest.y?i.dest.y*s:""].join(" ")}),t},isActive:function(){const{selectedPathId:t,tool:e}=this.store.state;return("EDIT"===e||"PEN"===e||"RECT"===e)&&t===this.id},transform:function(){let t="";const{scaleX:e,scaleY:s}=this;return this.path.rotation&&(t+=`rotate(${this.path.rotation} ${this.path.rotationCenter.x*e} ${this.path.rotationCenter.y*s})`),t}},methods:{handleMouseDown:function(t,e,s){let i=this.store.state.selectedPathId;this.id!==i&&(this.store.selectPath(this.id,e,s),i=this.store.state.selectedPathId),"SELECT"===this.store.state.tool&&i===t&&(this.store.state.isMovingPath=!0)}}},ft=mt,gt=(s("1060"),Object(B["a"])(ft,pt,vt,!1,null,"27be1be3",null)),yt=gt.exports,xt={name:"ControlsLayer",components:{EditPath:yt},data:function(){return{store:M,private:{width:0,height:0,shouldUnselect:!1}}},mounted:function(){this.private.width=this.$refs.svg.clientWidth,this.private.height=this.$refs.svg.clientHeight,window.addEventListener("resize",function(){this.private.width=this.$refs.svg.clientWidth,this.private.height=this.$refs.svg.clientHeight,console.log("resize")}.bind(this))},computed:{scaleX:function(){const{viewBox:t}=this.store.state,{width:e}=this.private;return e/t.x},scaleY:function(){const{viewBox:t}=this.store.state,{height:e}=this.private;return e/t.y},viewBoxX:function(){return this.store.state.viewBox.x},viewBoxY:function(){return this.store.state.viewBox.y},zoom:function(){return this.store.state.zoom},hasLivePreview:function(){return!M.state.isFirstPoint&&"PEN"===M.state.tool},livePreview:function(){const{currentPoint:t,livePreviewSegment:e}=this.store.state,{scaleX:s,scaleY:i}=this;let o="";return e.dest&&(o=["M",t.x*s,t.y*i,e.type,e.dest.x*s,e.dest.y*i].join(" ")),o},activeSegment:function(){const{allPaths:t,selectedPathIndex:e,selectedPointIndex:s}=this.store.state,{scaleX:i,scaleY:o}=this;let n=0;if(null!==s&&null!==e){const{curve1:a,curve2:r,dest:l,type:c}=t[e].definition[s];if("M"===c||"Z"===c)return;const h=t[e].definition[s-1].dest;n=["M",void 0!==h.x?h.x*i:"",void 0!==h.y?h.y*o:"",c,void 0!==a.x?a.x*i:"",void 0!==a.y?a.y*o:"",void 0!==r.x?r.x*i:"",void 0!==r.y?r.y*o:"",void 0!==l.x?l.x*i:"",void 0!==l.y?l.y*o:""].join(" "),console.log(n)}return n}},watch:{viewBoxX:function(){this.private.width=this.$refs.svg.clientWidth,this.private.height=this.$refs.svg.clientHeight},viewBoxY:function(){this.private.width=this.$refs.svg.clientWidth,this.private.height=this.$refs.svg.clientHeight},zoom:function(){this.private.width=this.$refs.svg.clientWidth,this.private.height=this.$refs.svg.clientHeight}},methods:{transform:function(t){const{scaleX:e,scaleY:s}=this;let i="";return t&&t.rotation&&(i+=`rotate(${t.rotation} ${t.rotationCenter.x*e} ${t.rotationCenter.y*s})`),i},selectPath:function(t,e,s){this.store.selectPath(t,e,s)},startPointMove:function(t,e){this.store.setSelectedPoint(t,e)},drawLine(){let{tool:t}=this.store.state;"PEN"===t&&(this.store.state.currentSegment="L",this.store.state.isDrawing=!1)},handleClick(){let{tool:t}=this.store.state;const{shouldUnselect:e}=this.private;console.log("isSelecting",this.store.state.isSelecting),"PEN"!==t&&e&&(this.store.unselectPath(),this.private.shouldUnselect=!1)},handleMouseDown(t){const{tool:e}=this.store.state;"PEN"!==e&&t.target.matches(".controls-layer")&&(this.private.shouldUnselect=!0),this.$emit("handleMouseDown",t)},handleMouseMove(t){this.$emit("handleMouseMove",t)},pointHandleMouseDown(t,e,s,i,o,n){this.store.debug&&console.log("pointHandleMouseDown","ControlsLayer");const{tool:a,allPaths:r,selectedPointIndex:l,selectedPathId:c,isFirstPoint:h}=this.store.state;let d=!1;const u=function(){return l===r[n].definition.length-1},p=function(){return s===r[n].definition.length-1};"PEN"!==a||c!==o||h||(0===s&&u||p&&0===l)&&(d=!0),d&&this.store.joinPoints(n),"PEN"!==a&&(this.selectPath(o,n,t),this.startPointMove(e,i)),"PEN"===a&&(0===s||p)&&(t.stopPropagation(),this.store.continuePath(o,n,e,s))}}},Pt=xt,bt=(s("0638"),Object(B["a"])(Pt,dt,ut,!1,null,"edfbf788",null)),wt=bt.exports,Ct={name:"MainCanvas",data:function(){return{store:M}},components:{SvgPath:ht,ControlsLayer:wt},computed:{hasLivePreview:function(){return!M.state.isFirstPoint&&"PEN"===M.state.tool},livePreview:function(){const{currentPoint:t,livePreviewSegment:e}=this.store.state;let s="";return e.dest&&(s=["M",t.x,t.y,e.type,e.dest.x,e.dest.y].join(" ")),s}},methods:{drawLine(){let{tool:t}=this.store.state;"PEN"===t&&(this.store.state.currentSegment="L",this.store.state.isDrawing=!1)},handleMouseDown:function(t){this.store.debug&&console.log("handleMouseDown","MainCanvas");let e=this.store.state.selectedPathId;if(e)this.store.handleMouseDown(t,this.$refs[e][0].$el);else{const e=document.querySelector("#app svg g");this.store.handleMouseDown(t,e)}},handleMouseMove:function(t){this.store.handleMouseMove(t)},transform:function(t){let e="";return t&&t.rotation&&(e+=`rotate(${t.rotation} ${t.rotationCenter.x} ${t.rotationCenter.y})`),e},startPointMove:function(t,e){this.store.setSelectedPoint(t,e)},endPointMove:function(t){this.store.handleMouseUp(t)}}},kt=Ct,Lt=(s("a050"),Object(B["a"])(kt,it,ot,!1,null,"65231081",null)),St=Lt.exports,Mt={name:"App",data:function(){return{store:M}},created:function(){},components:{LeftPanel:$,RightPanel:q,TopPanel:st,MainCanvas:St}},Et=Mt,Tt=(s("034f"),Object(B["a"])(Et,o,n,!1,null,null,null)),_t=Tt.exports;let It;const Bt=function(){document.addEventListener("keydown",(function(t){if(t.ctrlKey&&"z"===t.key&&(M.debug&&console.log("shortcut undo"),M.setHistoryPos(1),M.historyGoTo(M.state.historyPos)),t.ctrlKey&&"y"===t.key&&(M.debug&&console.log("shortcut undo"),M.setHistoryPos(-1),M.historyGoTo(M.state.historyPos)),!t.target.matches("input")&&("e"===t.key&&(M.state.tool="EDIT"),"s"===t.key&&(M.state.tool="SELECT"),"p"===t.key&&(M.state.tool="PEN"),"-"===t.key&&("EDIT"!==M.state.tool&&"PEN"!==M.state.tool||M.deleteSegment()),"Delete"!==t.key&&"Backspace"!==t.key||("EDIT"!==M.state.tool&&"PEN"!==M.state.tool||M.splitPath(void 0,void 0,!1),"SELECT"===M.state.tool&&M.deletePath()),t.ctrlKey&&"c"===t.key&&(It=M.copyPath()),t.ctrlKey&&"v"===t.key&&It&&M.pastePath(It),"SELECT"===M.state.tool))switch(t.key){case"ArrowLeft":M.movePathByPx(M.getPath(),-1,0),M.updateBBox(),M.historySnapshot();break;case"ArrowRight":M.movePathByPx(M.getPath(),1,0),M.updateBBox(),M.historySnapshot();break;case"ArrowUp":M.movePathByPx(M.getPath(),0,-1),M.updateBBox(),M.historySnapshot();break;case"ArrowDown":M.movePathByPx(M.getPath(),0,1),M.updateBBox(),M.historySnapshot();break}}))};var jt=Bt;i["a"].config.productionTip=!0,new i["a"]({data:M,render:t=>t(_t)}).$mount("#app"),jt()},"58ae":function(t,e,s){},"6d2a":function(t,e,s){"use strict";var i=s("1290"),o=s.n(i);o.a},"7d1c":function(t,e,s){},"851e":function(t,e,s){},"85ec":function(t,e,s){},"88b0":function(t,e,s){"use strict";var i=s("d2ce"),o=s.n(i);o.a},"8edb":function(t,e,s){"use strict";var i=s("f2b7"),o=s.n(i);o.a},"94e9":function(t,e,s){},a050:function(t,e,s){"use strict";var i=s("94e9"),o=s.n(i);o.a},bfc3:function(t,e,s){"use strict";var i=s("7d1c"),o=s.n(i);o.a},d2ce:function(t,e,s){},d55b:function(t,e,s){"use strict";var i=s("514f"),o=s.n(i);o.a},d733:function(t,e,s){},f2b7:function(t,e,s){}});
//# sourceMappingURL=app.8d06b664.js.map